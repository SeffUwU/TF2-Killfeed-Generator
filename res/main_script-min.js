function get_icon_list(){var t=Object.keys(iconlist).length;console.log(t);for(var e=1;e<t+1;e++){var a=Object.keys(iconlist[`${e}`]),i=iconlist[`${e}`][`${a}`];$(".killicon-container").append(`<div class='list-item ${i}' data-fname="${a}"> <img class="selectable-img " src="icons_sorted/${a}" data-fname="${a}" alt='`+a.toString().slice(0,-4).replace("_"," ")+"'> </div>")}}function color_switch(){var t=$("#display-feed");0==t.attr("data-colors")?(t.attr("data-colors",1),$(".clr-show-l").css("background","#004bff"),$(".clr-show-r").css("background","#c40000")):(t.attr("data-colors",0),$(".clr-show-l").css("background","#c40000"),$(".clr-show-r").css("background","#004bff"))}function draw_kill(t){let e=new Image,a=new Image;a.origin="anonymous",e.origin="anonymous";let i=$("#display-feed"),s=$("#KILLER").val(),c=$("#VICTIM").val(),l=i.attr("data-icon-id"),d="#F1E9CB";if($("#is_init").prop("checked")||(d="#202020"),0==i.attr("data-colors"))var o="#A3574A",r="#557C83";else r="#A3574A",o="#557C83";e.src="icons_sorted/"+l;let n=document.getElementById("display-feed");n.width=1e3,n.height=80;let h=n.getContext("2d");e.onload=function(){let e=0;$("#is_drawIcon").prop("checked")&&(e=this.width),h.font="bold 125% Verdana";let l=0;1==t?l=h.measureText("is DOMINATING").width:2==t&&(l=h.measureText($("#custom_special").val()).width);let g="#3e3923";$("#is_init").prop("checked")||(g="#F1E9CB");let m=112+h.measureText(s).width+e+l+h.measureText(c).width;$("#save").attr("data-img-width",Math.ceil(m));let f=n.width/2-m/2;h.roundRect(f,20,f+m,n.height,6),h.strokeStyle="#000",h.fillStyle=d,h.fill(),h.fillStyle=o,h.fillText(s,f+38,58);let p=40;$("#is_drawIcon").prop("checked")&&(p=60);let u=f+p+h.measureText(s).width,w=n.height/2-this.height/2+9;if("0"!=i.attr("data-special-bg")&&(h.globalAlpha=.75,h.drawImage(a,u+e/2-a.width,w-a.height/2,2*a.width,2*a.height),h.globalAlpha=1),$("#is_drawIcon").prop("checked")&&(h.drawImage(this,u,w),!$("#is_init").prop("checked"))){let t=masked_image(this,64,60,36,255,25),e=document.createElement("canvas");e.width=n.width,e.height=n.height;let a=e.getContext("2d");a.drawImage(this,u,w),a.globalCompositeOperation="source-in",a.drawImage(t,u,w),h.drawImage(e,0,0)}1==t?(h.fillStyle=g,h.fillText("is DOMINATING",u+e+14,58)):2==t&&(h.fillStyle=g,h.fillText($("#custom_special").val(),u+e+14,58)),h.fillStyle=r,h.fillText(c,u+e+l+([1,2].includes(t)?24:14),58)},"1"==i.attr("data-special-bg")?a.src=$("img[data-fname='Killicon_crit.png']").attr("src"):a.src=$("img[data-fname='Killicon_australium.png']").attr("src"),e.src=1==t?"icons_sorted/Killicon_domination.png":$(`img[data-fname='${l}']`).attr("src")}function masked_image(t,e,a,i,s,c){let l=document.createElement("canvas");l.width=t.width,l.height=t.width,ctx=l.getContext("2d"),ctx.drawImage(t,0,0,t.width,t.height);for(var d=ctx.getImageData(0,0,l.width,l.height),o=d.data,r=0;r<o.length;r+=4){var n=o[r+0]>e-c&&o[r+0]<e+c&&o[r+1]>a-c&&o[r+1]<a+c&&o[r+2]>i-c&&o[r+2]<i+c&&o[r+3]>0;o[r+0]=n?241:0,o[r+1]=n?233:0,o[r+2]=n?203:0,o[r+3]=n?255:0}return ctx.putImageData(d,0,0),l}function save(){let t=$("#save").attr("data-img-width"),e=document.getElementById("display-feed"),a=e.width/2-t/2,i=document.createElement("canvas");i.width=t,i.height=80,tctx=i.getContext("2d"),tctx.drawImage(e,a,0,t,80,0,-10,t,80);var s=document.createElement("a");s.download="killfeed_generated.png",s.href=i.toDataURL(),s.click(),s.delete}$(document).ready(function(){$("#is_crit").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",1),$("#is_aussie").prop("checked",!1)):t.attr("data-special-bg",0)}),$("#is_aussie").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",2),$("#is_crit").prop("checked",!1)):t.attr("data-special-bg",0)}),$(".sortable").click(function(){var t=$(this).attr("data-tags");"off"==$(this).attr("data-sort")?($(`.${t}`).css("display",""),$(this).attr("data-sort","on"),$(this).css("background-color","#2b793f")):($(`.${t}`).css("display","none"),$(this).attr("data-sort","off"),$(this).css("background-color","#d4232373"))})}),$(document).on("click",".list-item",function(){$(".list-item").removeClass("selected");var t=$(this).attr("data-fname");$(this).addClass("selected"),$("#display-feed").attr("data-icon-id",`${t}`)}),CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,i,s){var c=Math.PI/180;a-t-2*s<0&&(s=(a-t)/2),i-e-2*s<0&&(s=(i-e)/2),this.beginPath(),this.moveTo(t+s,e),this.lineTo(a-s,e),this.arc(a-s,e+s,s,270*c,360*c,!1),this.lineTo(a,i-s),this.arc(a-s,i-s,s,0*c,90*c,!1),this.lineTo(t+s,i),this.arc(t+s,i-s,s,90*c,180*c,!1),this.lineTo(t,e+s),this.arc(t+s,e+s,s,180*c,270*c,!1),this.closePath()};