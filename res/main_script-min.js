function get_icon_list(){var t=Object.keys(iconlist).length;console.log(t);for(var e=1;e<t+1;e++){var a=Object.keys(iconlist[`${e}`]),i=iconlist[`${e}`][`${a}`];$(".killicon-container").append(`<div class='list-item ${i}' data-fname="${a}"> <img class="selectable-img " src="icons_sorted/${a}" data-fname="${a}" alt='`+a.toString().slice(0,-4).replace("_"," ")+"'> </div>")}}function color_switch(){var t=$("#display-feed");0==t.attr("data-colors")?(t.attr("data-colors",1),$(".clr-show-l").css("background","#004bff"),$(".clr-show-r").css("background","#c40000")):(t.attr("data-colors",0),$(".clr-show-l").css("background","#c40000"),$(".clr-show-r").css("background","#004bff"))}function draw_kill(t){let e=$("#display-feed"),a=new Image,i=e.attr("data-is-ks")>0;1==i&&(a.src=$("#is_init").prop("checked")?"icons_sorted/Killstreak_Icon.png":"icons_sorted/Killstreak_Icon02.png");let s=new Image;s.origin="anonymous";let l=new Image;l.origin="anonymous";let o=$("#KILLER").val(),c=$("#VICTIM").val(),d=e.attr("data-icon-id"),n="#F1E9CB";if($("#is_init").prop("checked")||(n="#202020"),0==e.attr("data-colors"))var r="#A3574A",h="#557C83";else h="#A3574A",r="#557C83";l.src="icons_sorted/"+d;let g=document.getElementById("display-feed");g.width=1e3,g.height=80;let f=g.getContext("2d");f.imageSmoothingEnabled=!0,l.onload=function(){let l=0;$("#is_drawIcon").prop("checked")&&(l=this.width),l*=1.52,f.font="bold 125% Verdana";let d=0;1==t?d=f.measureText("is DOMINATING").width:2==t&&(d=f.measureText($("#custom_special").val()).width);let m="#3e3923";$("#is_init").prop("checked")||(m="#F1E9CB");let p=112+f.measureText(o).width+l+d+f.measureText(c).width,k=e.attr("data-is-ks");f.font="bold 20px Verdana",ks_offset=1==i?f.measureText(k).width+30:0,f.font="bold 125% Verdana",p+=ks_offset,$("#save").attr("data-img-width",Math.ceil(p));let u=g.width/2-p/2;f.roundRect(u,20,u+p,g.height,6),f.strokeStyle="#000",f.fillStyle=n,f.fill(),f.fillStyle=r,f.fillText(o,u+38,58);let w=40+ks_offset;$("#is_drawIcon").prop("checked")&&(w=50+ks_offset);let _=u+w+f.measureText(o).width,b=g.height/2-this.height/2+9;if(i>0){f.font="bold 20px Verdana",f.fillStyle=$("#is_init").prop("checked")?"#202020":"#f1e9cb",f.fillText(k,_-ks_offset,58);let t=f.measureText(k).width;console.log("Killstreak drawn."),f.drawImage(a,t+_-ks_offset,b+6,a.height/1.7,a.width/1.7),f.font="bold 125% Verdana"}if("0"!=e.attr("data-special-bg")){let t=1.52+.7;f.globalAlpha=.75,f.globalCompositeOperation="source-atop",f.drawImage(s,_+l/2-s.width*t/2,b-s.height*t/4,s.width*t,s.height*t),f.globalAlpha=1,f.globalCompositeOperation="source-over"}if($("#is_drawIcon").prop("checked")){let e=this.width,a=this.height;if(f.drawImage(this,_,b-a/4,1.52*e,1.52*a),!$("#is_init").prop("checked")||1==t){let i=masked_image(this,64,60,36,255,55,e,a,1.52);1==t&&(i=masked_image(this,245,229,193,255,10,e,a,1.52));let s=document.createElement("canvas");s.width=g.width,s.height=g.height;let l=s.getContext("2d");l.drawImage(this,_,b-a/4,1.52*e,1.52*a),l.globalCompositeOperation="source-in",l.drawImage(i,_,b-a/4),f.drawImage(s,0,0),s.delete}}1==t?(f.fillStyle=m,f.fillText("is DOMINATING",_+l+14,58)):2==t&&(f.fillStyle=m,f.fillText($("#custom_special").val(),_+l+14,58)),f.fillStyle=h,f.fillText(c,_+l+d+([1,2].includes(t)?24:14),58)},"1"==e.attr("data-special-bg")?s.src=$("img[data-fname='Killicon_crit.png']").attr("src"):s.src=$("img[data-fname='Killicon_australium.png']").attr("src"),l.src=1==t?"icons_sorted/Killicon_domination.png":$(`img[data-fname='${d}']`).attr("src")}function masked_image(t,e,a,i,s,l,o,c,d=1){let n=document.createElement("canvas");n.width=o*d,n.height=c*d,ctx=n.getContext("2d"),ctx.drawImage(t,0,0,o*d,c*d);for(var r=ctx.getImageData(0,0,n.width,n.height),h=r.data,g=0;g<h.length;g+=4){var f=h[g+0]>e-l&&h[g+0]<e+l&&h[g+1]>a-l&&h[g+1]<a+l&&h[g+2]>i-l&&h[g+2]<i+l&&h[g+3]>0;h[g+0]=f?241:0,h[g+1]=f?233:0,h[g+2]=f?203:0,h[g+3]=f?255:0}return ctx.putImageData(r,0,0),n}function save(){let t=$("#save").attr("data-img-width"),e=document.getElementById("display-feed"),a=e.width/2-t/2,i=document.createElement("canvas");i.width=t,i.height=80,tctx=i.getContext("2d"),tctx.drawImage(e,a,0,t,80,0,-10,t,80);var s=document.createElement("a");s.download="killfeed_generated.png",s.href=i.toDataURL(),s.click(),s.delete}$(document).ready(function(){$("#KILLER, #VICTIM").on("input",()=>{$("#updateOnChange").prop("checked")&&draw_kill()}),$("#is_killstreak").on("input",()=>{let t=$("#is_killstreak").val();$("#display-feed").attr("data-is-ks",t>=0?t:0)}),$("#is_crit").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",1),$("#is_aussie").prop("checked",!1)):t.attr("data-special-bg",0)}),$("#is_aussie").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",2),$("#is_crit").prop("checked",!1)):t.attr("data-special-bg",0)}),$(".sortable").click(function(){var t=$(this).attr("data-tags");"off"==$(this).attr("data-sort")?($(`.${t}`).css("display",""),$(this).attr("data-sort","on"),$(this).css("background-color","#2b793f")):($(`.${t}`).css("display","none"),$(this).attr("data-sort","off"),$(this).css("background-color","#d4232373"))}),$(".name-input").keypress(function(t){10!=t.keyCode&&13!=t.keyCode||!t.shiftKey?10!=t.keyCode&&13!=t.keyCode||$("#kill_btn").click():$("#kill_btn_dom").click()})}),$(document).on("click",".list-item",function(){$(".list-item").removeClass("selected");var t=$(this).attr("data-fname");$(this).addClass("selected"),$("#display-feed").attr("data-icon-id",`${t}`)}),CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,i,s){var l=Math.PI/180;a-t-2*s<0&&(s=(a-t)/2),i-e-2*s<0&&(s=(i-e)/2),this.beginPath(),this.moveTo(t+s,e),this.lineTo(a-s,e),this.arc(a-s,e+s,s,270*l,360*l,!1),this.lineTo(a,i-s),this.arc(a-s,i-s,s,0*l,90*l,!1),this.lineTo(t+s,i),this.arc(t+s,i-s,s,90*l,180*l,!1),this.lineTo(t,e+s),this.arc(t+s,e+s,s,180*l,270*l,!1),this.closePath()};