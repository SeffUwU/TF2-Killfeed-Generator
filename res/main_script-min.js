function get_icon_list(){var t=Object.keys(iconlist).length;console.log(t);for(var e=1;e<t+1;e++){var a=Object.keys(iconlist[`${e}`]),i=iconlist[`${e}`][`${a}`];$(".killicon-container").append(`<div class='list-item ${i}' data-fname="${a}"> <img class="selectable-img " src="icons_sorted/${a}" data-fname="${a}" alt='`+a.toString().slice(0,-4).replace("_"," ")+"'> </div>")}}function color_switch(){var t=$("#display-feed");0==t.attr("data-colors")?(t.attr("data-colors",1),$(".clr-show-l").css("background","#004bff"),$(".clr-show-r").css("background","#c40000")):(t.attr("data-colors",0),$(".clr-show-l").css("background","#c40000"),$(".clr-show-r").css("background","#004bff"))}function draw_kill(t){let e=$("#display-feed"),a=new Image,i=e.attr("data-is-ks"),s=new Image;s.origin="anonymous";let l=new Image;l.origin="anonymous";let c=$("#KILLER").val(),o=$("#VICTIM").val(),d=e.attr("data-icon-id"),r="#F1E9CB";if($("#is_init").prop("checked")||(r="#202020"),0==e.attr("data-colors"))var n="#A3574A",h="#557C83";else h="#A3574A",n="#557C83";l.src="icons_sorted/"+d;let g=document.getElementById("display-feed");g.width=1e3,g.height=80;let m=g.getContext("2d");l.onload=function(){let l=0;$("#is_drawIcon").prop("checked")&&(l=this.width),l*=1.52,m.font="bold 125% Verdana";let d=0;1==t?d=m.measureText("is DOMINATING").width:2==t&&(d=m.measureText($("#custom_special").val()).width);let f="#3e3923";$("#is_init").prop("checked")||(f="#F1E9CB");let p=112+m.measureText(c).width+l+d+m.measureText(o).width;ks_offset=1==i?20:0,p+=ks_offset,$("#save").attr("data-img-width",Math.ceil(p));let u=g.width/2-p/2;m.roundRect(u,20,u+p,g.height,6),m.strokeStyle="#000",m.fillStyle=r,m.fill(),m.fillStyle=n,m.fillText(c,u+38,58);let k=40+ks_offset;$("#is_drawIcon").prop("checked")&&(k=60+ks_offset);let w=u+k+m.measureText(c).width,_=g.height/2-this.height/2+9;if(1==i&&(console.log("ks drawn"),m.drawImage(a,w-ks_offset,_)),"0"!=e.attr("data-special-bg")){let t=1.52+.7;m.globalAlpha=.75,m.globalCompositeOperation="source-atop",m.drawImage(s,w+l/2-s.width*t/2,_-5-s.height*t/4,s.width*t,s.height*t),m.globalAlpha=1,m.globalCompositeOperation="source-over"}if($("#is_drawIcon").prop("checked")){let e=this.width,a=this.height;if(m.drawImage(this,w,_-a/4,1.52*e,1.52*a),!$("#is_init").prop("checked")||1==t){let i=masked_image(this,64,60,36,255,55,e,a,1.52);1==t&&(i=masked_image(this,245,229,193,255,10,e,a,1.52));let s=document.createElement("canvas");s.width=g.width,s.height=g.height;let l=s.getContext("2d");l.drawImage(this,w,_-a/4,1.52*e,1.52*a),l.globalCompositeOperation="source-in",l.drawImage(i,w,_-a/4),m.drawImage(s,0,0),s.delete}}1==t?(m.fillStyle=f,m.fillText("is DOMINATING",w+l+14,58)):2==t&&(m.fillStyle=f,m.fillText($("#custom_special").val(),w+l+14,58)),m.fillStyle=h,m.fillText(o,w+l+d+([1,2].includes(t)?24:14),58)},"1"==e.attr("data-special-bg")?s.src=$("img[data-fname='Killicon_crit.png']").attr("src"):s.src=$("img[data-fname='Killicon_australium.png']").attr("src"),l.src=1==t?"icons_sorted/Killicon_domination.png":$(`img[data-fname='${d}']`).attr("src"),1==i&&(a.src="icons_sorted/Killstreak_Icon.png")}function masked_image(t,e,a,i,s,l,c,o,d=1){let r=document.createElement("canvas");r.width=c*d,r.height=o*d,ctx=r.getContext("2d"),ctx.drawImage(t,0,0,c*d,o*d);for(var n=ctx.getImageData(0,0,r.width,r.height),h=n.data,g=0;g<h.length;g+=4){var m=h[g+0]>e-l&&h[g+0]<e+l&&h[g+1]>a-l&&h[g+1]<a+l&&h[g+2]>i-l&&h[g+2]<i+l&&h[g+3]>0;h[g+0]=m?255:0,h[g+1]=m?255:0,h[g+2]=m?255:0,h[g+3]=m?255:0}return ctx.putImageData(n,0,0),r}function save(){let t=$("#save").attr("data-img-width"),e=document.getElementById("display-feed"),a=e.width/2-t/2,i=document.createElement("canvas");i.width=t,i.height=80,tctx=i.getContext("2d"),tctx.drawImage(e,a,0,t,80,0,-10,t,80);var s=document.createElement("a");s.download="killfeed_generated.png",s.href=i.toDataURL(),s.click(),s.delete}$(document).ready(function(){$("#is_crit").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",1),$("#is_aussie").prop("checked",!1)):t.attr("data-special-bg",0)}),$("#is_aussie").change(function(){var t=$("#display-feed");this.checked?(t.attr("data-special-bg",2),$("#is_crit").prop("checked",!1)):t.attr("data-special-bg",0)}),$(".sortable").click(function(){var t=$(this).attr("data-tags");"off"==$(this).attr("data-sort")?($(`.${t}`).css("display",""),$(this).attr("data-sort","on"),$(this).css("background-color","#2b793f")):($(`.${t}`).css("display","none"),$(this).attr("data-sort","off"),$(this).css("background-color","#d4232373"))}),$(".name-input").keypress(function(t){10!=t.keyCode&&13!=t.keyCode||!t.shiftKey?10!=t.keyCode&&13!=t.keyCode||$("#kill_btn").click():$("#kill_btn_dom").click()})}),$(document).on("click",".list-item",function(){$(".list-item").removeClass("selected");var t=$(this).attr("data-fname");$(this).addClass("selected"),$("#display-feed").attr("data-icon-id",`${t}`)}),CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,i,s){var l=Math.PI/180;a-t-2*s<0&&(s=(a-t)/2),i-e-2*s<0&&(s=(i-e)/2),this.beginPath(),this.moveTo(t+s,e),this.lineTo(a-s,e),this.arc(a-s,e+s,s,270*l,360*l,!1),this.lineTo(a,i-s),this.arc(a-s,i-s,s,0*l,90*l,!1),this.lineTo(t+s,i),this.arc(t+s,i-s,s,90*l,180*l,!1),this.lineTo(t,e+s),this.arc(t+s,e+s,s,180*l,270*l,!1),this.closePath()};