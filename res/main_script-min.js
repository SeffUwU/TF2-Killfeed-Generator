function get_icon_list(){var c=Object.keys(iconlist).length;console.log(c);for(var b=1;b<c+1;b++){var a=Object.keys(iconlist[`${b}`]),d=iconlist[`${b}`][`${a}`];$(".killicon-container").append(`<div class='list-item ${d}' data-fname="${a}"> <img class="selectable-img " src="icons_sorted/${a}" data-fname="${a}" alt='`+a.toString().slice(0,-4).replace("_"," ")+"'> </div>")}}function color_switch(){var a=$("#display-feed");0==a.attr("data-colors")?(a.attr("data-colors",1),$(".clr-show-l").css("background","#004bff"),$(".clr-show-r").css("background","#c40000")):(a.attr("data-colors",0),$(".clr-show-l").css("background","#c40000"),$(".clr-show-r").css("background","#004bff"))}function draw_kill(f){let a=$("#display-feed"),g=new Image,h=a.attr("data-is-ks")>0,d=new Image;d.origin="anonymous";let b=new Image;b.origin="anonymous";let j=$("#KILLER").val(),k=$("#VICTIM").val(),e=a.attr("data-icon-id"),l=$("#is_init").prop("checked")?"#F1E9CB":"#202020",m=0==a.attr("data-colors")?"#A3574A":"#557C83",n=0==a.attr("data-colors")?"#557C83":"#A3574A",c=document.getElementById("display-feed");!0==h&&(g.src=$("#is_init").prop("checked")?"icons_sorted/Killstreak_Icon.png":"icons_sorted/Killstreak_Icon02.png"),b.src="icons_sorted/"+e,c.width=1e3,c.height=80;let i=c.getContext("2d");i.imageSmoothingEnabled=!0,b.onload=function(){i.font="bold 125% Verdana";let e=1.52,r=$("#is_drawIcon").prop("checked")?this.width*e:0,z=$("#is_init").prop("checked")?"#3e3923":"#F1E9CB",v=a.attr("data-is-ks"),w=0+(1==f?i.measureText("is DOMINATING").width:2==f?i.measureText($("#custom_special").val()).width:0);w+=r,i.font="bold 20px Verdana",ks_offset=!0==h?i.measureText(v).width+30:0,i.font="bold 125% Verdana";let x=112+i.measureText(j).width+w+i.measureText(k).width+ks_offset;$("#save").attr("data-img-width",Math.ceil(x+1));let s=c.width/2-x/2;i.roundRect(s,20,s+x,c.height,6),i.strokeStyle="#000",i.fillStyle=l,i.fill(),i.fillStyle=m,i.fillText(j,s+38,58);let A=ks_offset+($("#is_drawIcon").prop("checked")?50:40),b=s+A+i.measureText(j).width,p=c.height/2-this.height/2+9;if(h>0){i.font="bold 20px Verdana",i.fillStyle=$("#is_init").prop("checked")?"#202020":"#f1e9cb",i.fillText(v,b-ks_offset,58);let B=i.measureText(v).width;i.drawImage(g,B+b-ks_offset,p+6,g.height/1.7,g.width/1.7),i.font="bold 125% Verdana"}if("0"!=a.attr("data-special-bg")){let t=e+.7;i.globalAlpha=.75,i.globalCompositeOperation="source-atop",i.drawImage(d,b+r/2-d.width*t/2,p-d.height*t/4,d.width*t,d.height*t),i.globalAlpha=1,i.globalCompositeOperation="source-over"}if($("#is_drawIcon").prop("checked")){let u=this.width,o=this.height;if(i.drawImage(this,b,p-o/4,u*e,o*e),!$("#is_init").prop("checked")||1==f){let C=1==f?masked_image(this,245,229,193,255,10,u,o,e):masked_image(this,64,60,36,255,55,u,o,e),q=document.createElement("canvas"),y=q.getContext("2d");q.width=c.width,q.height=c.height,y.drawImage(this,b,p-o/4,u*e,o*e),y.globalCompositeOperation="source-in",y.drawImage(C,b,p-o/4),i.drawImage(q,0,0),q.delete}}1==f?(i.fillStyle=z,i.fillText("is DOMINATING",b+r+14,58)):2==f&&(i.fillStyle=z,i.fillText($("#custom_special").val(),b+r+14,58)),i.fillStyle=n,i.fillText(k,b+w+([1,2].includes(f)?24:14),58)},d.src=$("1"==a.attr("data-special-bg")?"img[data-fname='Killicon_crit.png']":"img[data-fname='Killicon_australium.png']").attr("src"),b.src=1==f?"icons_sorted/Killicon_domination.png":$(`img[data-fname='${e}']`).attr("src")}function save(){let a=$("#save").attr("data-img-width"),d=document.getElementById("display-feed"),e=d.width/2-a/2,b=document.createElement("canvas");b.width=a,b.height=80,(tctx=b.getContext("2d")).drawImage(d,e,0,a,80,0,-10,a,80);var c=document.createElement("a");c.download="killfeed_generated.png",c.href=b.toDataURL(),c.click(),c.delete}function masked_image(m,g,h,i,n,c,j,k,e=1){let d=document.createElement("canvas");d.width=j*e,d.height=k*e,(ctx=d.getContext("2d")).drawImage(m,0,0,j*e,k*e);for(var l=ctx.getImageData(0,0,d.width,d.height),b=l.data,a=0;a<b.length;a+=4){var f=b[a+0]>g-c&&b[a+0]<g+c&&b[a+1]>h-c&&b[a+1]<h+c&&b[a+2]>i-c&&b[a+2]<i+c&&b[a+3]>0;b[a+0]=f?241:0,b[a+1]=f?233:0,b[a+2]=f?203:0,b[a+3]=f?255:0}return ctx.putImageData(l,0,0),d}$(document).ready(function(){$("#KILLER, #VICTIM").on("input",()=>{$("#updateOnChange").prop("checked")&&draw_kill()}),$("#is_killstreak").on("input",()=>{let a=$("#is_killstreak").val();$("#display-feed").attr("data-is-ks",a>=0?a:0)}),$("#is_crit").change(function(){var a=$("#display-feed");this.checked?(a.attr("data-special-bg",1),$("#is_aussie").prop("checked",!1)):a.attr("data-special-bg",0)}),$("#is_aussie").change(function(){var a=$("#display-feed");this.checked?(a.attr("data-special-bg",2),$("#is_crit").prop("checked",!1)):a.attr("data-special-bg",0)}),$(".sortable").click(function(){var a=$(this).attr("data-tags");"off"==$(this).attr("data-sort")?($(`.${a}`).css("display",""),$(this).attr("data-sort","on"),$(this).css("background-color","#2b793f")):($(`.${a}`).css("display","none"),$(this).attr("data-sort","off"),$(this).css("background-color","#d4232373"))}),$(".name-input").keypress(function(a){(10==a.keyCode||13==a.keyCode)&&a.shiftKey?$("#kill_btn_dom").click():(10==a.keyCode||13==a.keyCode)&&$("#kill_btn").click()})}),$(document).on("click",".list-item",function(){$(".list-item").removeClass("selected");var a=$(this).attr("data-fname");$(this).addClass("selected"),$("#display-feed").attr("data-icon-id",`${a}`)}),CanvasRenderingContext2D.prototype.roundRect=function(c,d,e,f,a){var b=Math.PI/180;e-c-2*a<0&&(a=(e-c)/2),f-d-2*a<0&&(a=(f-d)/2),this.beginPath(),this.moveTo(c+a,d),this.lineTo(e-a,d),this.arc(e-a,d+a,a,270*b,360*b,!1),this.lineTo(e,f-a),this.arc(e-a,f-a,a,0*b,90*b,!1),this.lineTo(c+a,f),this.arc(c+a,f-a,a,90*b,180*b,!1),this.lineTo(c,d+a),this.arc(c+a,d+a,a,180*b,270*b,!1),this.closePath()}